---
title: Dotfile Project Configuration
---

# The Cider-CI Dotfile {#dotfile}
{:.no_toc}

* Will be replaced with the ToC, excluding the "Contents" header
{:toc}


This page documents the contents of the Cider-CI dotfile `.cider-ci.yml`. The
Cider-CI dotfile defines and specifies available _jobs_ and possible
relations between jobs for a given project.

The following example is an extract of the Cider-CI dotfile of the
[Bash Demo Project for Cider-CI][].


    # Cider-CI dotfile .cider-ci.yml

    jobs:

      "Chain-Prerequisite-Demo": 
        description: |
          This one serves as a prerequisite to the "Chain-Dependent-Demo".
        specification: 
          _cider-ci_include: /.cider-ci/shared/sleeping_task_context.yml

      "Chain-Dependent-Demo": 
        description: |
          This demo can only be started if the "Chain-Prerequisite-Demoe" has
          passed. There is also a trigger which will start this demo when the
          prerequisite has finished and the commit is part of the head of
          a branch matching the given regular expression. 
        specification: 
          _cider-ci_include: /.cider-ci/shared/sleeping_task_context.yml
        depends:
          jobs:
            "Chain-Prerequisite-Demo": passed
            "Trigger-Demo": passed
        trigger: true


      "Trigger-Demo": 
        description: |
          This execution will be automatically run when a commit containing it
          becomes the head of a branch. The `trigger` property accepts the same
          values as the `depends` property.
        specification:
          _cider-ci_include: /.cider-ci/shared/sleeping_task_context.yml
        trigger: 
          branch: "^master|wip.*$"
  {: .language-yaml}



# The _jobs_ Map {#jobs}

The keys of the _jobs_ map name available jobs for reference. The values
describe, specify and relate them.

|-----------------+----------+------------------------------------------------------------------|
| Key             | Required | Value                                                            |
|-----------------+----------+------------------------------------------------------------------|
| `specification` | yes      | Map, see the [Job Specification][] page                        |
| `description`   | no       | String, describes the job, plain text or markdown              |
| `depends`       | no       | Map, see the [Declaring Dependencies][] section                  |
| `trigger`       | no       | Boolean true value or Map, see the [Triggering Jobs][] section |
|-----------------+----------+------------------------------------------------------------------|
{: .table .table-striped }


## Declaring Dependencies {#depends}

The `depends` key declares a job to be dependent on either an other job or
the belonging to a branch. A job which has unsatisfied dependencies can not
be started. 

Jobs for a given commit (`tree_id` precisely) can depend on each other by
specifying a job name and the desired state of that job. 

    depends:
      jobs:
        "Chain-Prerequisite-Demo": passed
        "Trigger-Demo": passed
  {: .language-yaml}


Jobs can depend on their belonging to a certain branch. This is done in the
very same way as declaring triggers on branches. See the following section. 


## Triggering Jobs {#trigger}

Jobs will be automatically started if the conditions specified by the
`trigger` directive and their dependencies are satisfied. 

The value of the `trigger` directive can have one multiple types. 
A boolean true value is the simplest case: 

    jobs:
      "Chain-Dependent-Demo": 
        trigger: true
  {: .language-yaml}


The value of `trigger` can be a map where the keys `jobs` and `branch` are
honored. The value of the `jobs` key can be exactly the same as described in
[Declaring Dependencies][], we will not repeat it here. The value of the
`branch` key is always a string. Names of branches can be matched by either
case sensitive comparison or by regular expression matching. Regualar
expression matching will be performed if and only if the string starts with
a `^` character. 


    jobs:
      "Trigger-Demo": 
        trigger: 
          branch: "^master|wip.*$"
  {: .language-yaml}


Triggers are evaluated when an event related to the `tree_id` occurs.
This includes:

* A commit becomes the head of a branch.
* Some job changes into a final state.


  [Job Properties]: #job
  [Bash Demo Project for Cider-CI]: https://github.com/cider-ci/cider-ci_demo-project-bash
  [Job Specification]: /project_configuration/specification/
  [Declaring Dependencies]: #depends
  [Triggering Jobs]: #trigger

